导购网的项目是基于阿里妈妈联盟实现的网站应用，即在我们网站上展示其他电商网站的商品，用户通过我们网站到电商平台进行购买，则电商平台会给到返佣我们网站这种形式。当时我们的商品获取主要两个来源1个从阿里妈妈后台搜索功能，通过条件筛选（会有销量，返佣比例，最近佣金等参数进行一个筛选，得到的列表再导入到我们系统中），另一个是合作商家推广的商品（这部分相对返佣比例相对会大些）。阿里妈妈后台获取的商品数据，是通过分析搜索请求的参数，构造我们想要的参数进行请求模拟，再转化商品返佣链接导入到系统（为什么不用API转换，API需要账户权限，需要达到一定等级才能开通），到系统后会有小编进行一个编辑再上架。当时做的话需要解决的问题是商品信息的一致性，一个是价格变动，一个是销量的更新还有可能就是商品被下架了。系统设计的是首先后台会用kafka记录用户的浏览行为，像点击商品详情，点击购买链接等行为信息都会记录起来。而这些数据就是我们管理商品信息的一个重要依据。kafka的数据会被用在大数据分析做商品推荐，也用在运营系统做统计展示。而对于商品信息的更新，也会用来生成一个待更新列表。通过这些用户行为，可以统计到商品的活跃度，得到一个热门商品列表。对商品的用户行为查看详情，点击购买都会有一个权重，通过数据统计排序，得到的列表存储在一个待更新队列（通过kafka一个分区存储）上。然后消费者去消费信息，执行商品数据更新。热门度靠前的数据更新的频率也会较高，但是如果多次更新后发现数据都没变化则会相应的降低排名。而对于没有被点击浏览的商品，则当他点击时才触发后台线程去更新数据。